<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Deepgram Test</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>

  <link rel="icon" href="assets/dg_favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" href="style.css" />

  <link href="{{ url_for('static', filename='output.css') }}" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.14.8/dist/cdn.min.js" defer></script>

  <!-- note that this is put above the script -->
  <script>
    document.addEventListener('alpine:init', () => {
      Alpine.store('chat', {
        messages: [{type: 'human', data: "Hi!"}, {type: 'chat_model_stream', data: "Hello! How may I help"}, {type: 'tool_start', data: 'tool is called'}, {type: 'tool_end', data: 'tool has ended'}, {type: 'chat_model_stream', data: "Ok! I will create this order."} ]
      });
    });
  </script>
</head>

<body>
  <div>
    <main>
      <div class="title">
        <a href="https://deepgram.com/">
          <img class="dg-logo" src="assets/logo-6ad0fabf.png" />
        </a>
        <h1>Text-to-Speech</h1>
      </div>
      <div class="grid-container">
        <section class="tts-section">
          <label for="models">Choose a model:</label>
          <select id="models" name="models">
            <option value="aura-asteria-en">
              Asteria (Female US English)
            </option>
            <option value="aura-luna-en">Luna (Female US English)</option>
            <option value="aura-stella-en">Stella (Female US English)</option>
            <option value="aura-athena-en">Athena (Female UK English)</option>
            <option value="aura-hera-en">Hera (Female US English)</option>
            <option value="aura-orion-en">Orion (Male US English)</option>
            <option value="aura-arcas-en">Arcas (Male US English)</option>
            <option value="aura-perseus-en">Perseus (Male US English)</option>
            <option value="aura-angus-en">Angus (Male Irish English)</option>
            <option value="aura-orpheus-en">Orpheus (Male US English)</option>
            <option value="aura-helios-en">Helios (Male UK English)</option>
            <option value="aura-zeus-en">Zeus (Male US English)</option>
          </select>
          <textarea class="textarea textarea-bordered" id="text-input" placeholder="Add text to be synthesized..."></textarea>
          <div class="button-container">
            <div id="error-message"></div>
            <button id="play-button">
              <i class="button-icon fa-solid fa-play"></i>
            </button>
          </div>
          <label for="text-input-model">The actual input to the LLM:</label>

          <!-- <textarea placeholder="Add text to be passed to the llm model:"></textarea> -->
          <textarea id="text-input-model"  class="textarea textarea-primary" placeholder="Ask to order, cancel, or view current order..."></textarea>

          <button id="send-text" class="btn btn-primary">
            send text data
          </button>
        </section>
        <section class="information-section">
          <h5 class="text-xl font-bold dark:text-white">Chat with the ordering assistant</h5>


          <!-- <div id="chatModelStream">Will be replaced by llm output</div> -->
          <template x-for="message in $store.chat.messages" x-data>
            <div>
              <template x-if="message.type == 'chat_model_stream'">
                <div class="chat chat-start">
                  <div class="chat-image avatar">
                    <div class="w-10 rounded-full">
                      <img
                        alt="Bot profile picture"
                        src="assets/dg_favicon.ico" />
                    </div>
                  </div>
                  <div class="chat-header">Ordering assistant</div>
                  <div class="chat-bubble" x-text="message.data"></div>
                </div>
              </template>
              <template x-if="message.type == 'tool_start' || message.type == 'tool_end'">
                <!-- <div class="chat chat-start"> -->
                  <div class="divider" x-text="message.data"></div>
                <!-- </div> -->
              </template>
              <template x-if="message.type == 'human'">
                <div class="chat chat-end">
                  <div class="chat-image avatar">
                    <div class="w-10 rounded-full">
                      <img
                        alt="User profile picture"
                        src="https://img.daisyui.com/images/stock/photo-1534528741775-53994a69daeb.webp" />
                    </div>
                  </div>
                  <div class="chat-header">You</div>
                  <div class="chat-bubble" x-text="message.data"></div>
                </div>
              </template>
              <!-- <p class="chat-start" x-text="message.data"></p> -->
            </div>
          </template>
        </section>
      </div>
    </main>
  </div>
  <script src="client.js"></script>

</body>

</html>